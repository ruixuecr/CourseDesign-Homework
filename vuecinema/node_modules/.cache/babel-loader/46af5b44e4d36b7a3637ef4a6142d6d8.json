{"remainingRequest":"/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/node_modules/babel-loader/lib/index.js!/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/node_modules/vue-loader-v16/dist/index.js??ref--1-1!/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/src/views/History.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/src/views/History.vue","mtime":1686814016000},{"path":"/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/babel.config.js","mtime":1686531256000},{"path":"/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/node_modules/cache-loader/dist/cjs.js","mtime":1748439392992},{"path":"/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/node_modules/babel-loader/lib/index.js","mtime":1748439385418},{"path":"/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/node_modules/cache-loader/dist/cjs.js","mtime":1748439392992},{"path":"/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/node_modules/vue-loader-v16/dist/index.js","mtime":1748439392509}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IHV0aWwgfSBmcm9tICdAL2Fzc2V0cy9qcy9pbmRleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSGlzdG9yeScsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRpdGxlOiAnJywKICAgICAgbW92aWVzOiBbXSwKICAgICAgYWxsbW92aWVzOiBbXSwKICAgICAgLy8g5LqM5qyh6aG16Z2i5a2Y5YKo77yM55So5LqO6aG16Z2i5YiH5o2iCgogICAgICBpc19zaG93X3N1YjogMSwKICAgICAgcGFnZV9zaXplOiA1LAogICAgICBwYWdlOiAxCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcFN0YXRlKHsKICAgICAgaGlzdG9yeTogc3RhdGUgPT4gc3RhdGUubW92aWUuaGlzdG9yeQogICAgfSkKICB9LAogIG1ldGhvZHM6IHsKICAgIHJvdXRlckluZm9FdmVudChkYXRhKSB7CiAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHsKICAgICAgICBwYXRoOiAnL2luZm8nLAogICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICBpZDogZGF0YS5pZCwKICAgICAgICAgIGZsYWc6IHRoaXMuJHJvdXRlLnF1ZXJ5LmZsYWcKICAgICAgICB9CiAgICAgIH0pLmNhdGNoKGVycm9yID0+IGVycm9yKTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlKGRhdGEpIHsKICAgICAgdGhpcy5wYWdlX3NpemUgPSBkYXRhOwogICAgICB0aGlzLnBhZ2UgPSAxOwogICAgICBsZXQgbGFzdHBhZ2UgPSBNYXRoLmNlaWwodGhpcy5hbGxtb3ZpZXMubGVuZ3RoIC8gdGhpcy5wYWdlX3NpemUpOwogICAgICBpZiAodGhpcy5wYWdlIC0gbGFzdHBhZ2UgPCAwKSB7CiAgICAgICAgdGhpcy5tb3ZpZXMgPSB0aGlzLmFsbG1vdmllcy5zbGljZSgodGhpcy5wYWdlIC0gMSkgKiB0aGlzLnBhZ2Vfc2l6ZSwgdGhpcy5wYWdlX3NpemUgKiB0aGlzLnBhZ2UpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOW8guatpeWFvOWuuQogICAgICAgIHNldFRpbWVvdXQoKCkgPT4gewogICAgICAgICAgdGhpcy5tb3ZpZXMgPSB0aGlzLmFsbG1vdmllcy5zbGljZSgodGhpcy5wYWdlIC0gbGFzdHBhZ2UpICogdGhpcy5wYWdlX3NpemUsIHRoaXMucGFnZV9zaXplICogdGhpcy5wYWdlKTsKICAgICAgICB9LCAxKTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2UoZGF0YSkgewogICAgICB0aGlzLnBhZ2UgPSBkYXRhOwogICAgICBsZXQgbGFzdHBhZ2UgPSBNYXRoLmNlaWwodGhpcy5hbGxtb3ZpZXMubGVuZ3RoIC8gdGhpcy5wYWdlX3NpemUpOwogICAgICBpZiAodGhpcy5wYWdlIC0gbGFzdHBhZ2UgPD0gMCkgewogICAgICAgIHRoaXMubW92aWVzID0gdGhpcy5hbGxtb3ZpZXMuc2xpY2UoKHRoaXMucGFnZSAtIDEpICogdGhpcy5wYWdlX3NpemUsIHRoaXMucGFnZV9zaXplICogdGhpcy5wYWdlKTsKICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGxldCByb3V0ZXJpbmZvID0gdGhpcy4kcm91dGUucXVlcnk7CiAgICBpZiAocm91dGVyaW5mby50aXRsZSA9PSAn6KeC55yL6K6w5b2VJykgewogICAgICB0aGlzLm1vdmllcyA9IHRoaXMuaGlzdG9yeTsKICAgICAgdGhpcy5hbGxtb3ZpZXMgPSB0aGlzLmhpc3Rvcnk7CiAgICB9CiAgICB0aGlzLmhhbmRsZUN1cnJlbnRDaGFuZ2UoMSk7CiAgfQp9Ow=="},{"version":3,"names":["mapState","util","name","data","title","movies","allmovies","is_show_sub","page_size","page","computed","history","state","movie","methods","routerInfoEvent","$router","push","path","query","id","flag","$route","catch","error","handleSizeChange","lastpage","Math","ceil","length","slice","setTimeout","handleCurrentChange","created","routerinfo"],"sources":["/Users/admin/Desktop/前端项目/vue3电影网站系统/vuecinema/src/views/History.vue"],"sourcesContent":["<template>\r\n    <div class=\"bg-content\">\r\n        <div class=\"flex-r flex-jc-c flex-ac-t\">\r\n            <div class=\"w-px-max-1380 w-100\">\r\n                <div class=\"p-20 bg-black-blue-light\" style=\"min-height: calc(100vh - 138px)\">\r\n                    <Content :Title=\"this.$route.query.title\" :IsShow=\"false\">\r\n                        <template #content>\r\n                            <div class=\"w-100 m-b-20\">\r\n                                <div v-for=\"(item, index) in movies\" :key=\"index\">\r\n                                    <CardLineLarge\r\n                                        :index=\"index + (this.page - 1) * this.page_size\"\r\n                                        :id=\"item.id\"\r\n                                        :image=\"item.image\"\r\n                                        :name=\"item.name\"\r\n                                        :score=\"item.score\"\r\n                                        :rate=\"item.rate\"\r\n                                        :tag=\"item.tag\"\r\n                                        :info=\"item.info\"\r\n                                        @click=\"routerInfoEvent(item)\"\r\n                                    />\r\n                                    <Divider v-if=\"index + 1 != movies.length\" />\r\n                                </div>\r\n                                <div class=\"w-100 flex-r flex-jc-c flex-ai-c m-t-40\" v-if=\"movies.length > 0\">\r\n                                    <Pagination :total=\"this.allmovies.length\" @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\" />\r\n                                </div>\r\n                            </div>\r\n                        </template>\r\n                    </Content>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { mapState } from 'vuex'\r\nimport { util } from '@/assets/js/index'\r\n\r\nexport default {\r\n    name: 'History',\r\n    data() {\r\n        return {\r\n            title: '',\r\n            movies: [],\r\n            allmovies: [], // 二次页面存储，用于页面切换\r\n\r\n            is_show_sub: 1,\r\n\r\n            page_size: 5,\r\n            page: 1\r\n        }\r\n    },\r\n    computed: {\r\n        ...mapState({\r\n            history: (state) => state.movie.history\r\n        })\r\n    },\r\n    methods: {\r\n        routerInfoEvent(data) {\r\n            this.$router.push({ path: '/info', query: { id: data.id, flag: this.$route.query.flag } }).catch((error) => error)\r\n        },\r\n\r\n        handleSizeChange(data) {\r\n            this.page_size = data\r\n            this.page = 1\r\n            let lastpage = Math.ceil(this.allmovies.length / this.page_size)\r\n            if (this.page - lastpage < 0) {\r\n                this.movies = this.allmovies.slice((this.page - 1) * this.page_size, this.page_size * this.page)\r\n            } else {\r\n                // 异步兼容\r\n                setTimeout(() => {\r\n                    this.movies = this.allmovies.slice((this.page - lastpage) * this.page_size, this.page_size * this.page)\r\n                }, 1)\r\n            }\r\n        },\r\n        handleCurrentChange(data) {\r\n            this.page = data\r\n            let lastpage = Math.ceil(this.allmovies.length / this.page_size)\r\n            if (this.page - lastpage <= 0) {\r\n                this.movies = this.allmovies.slice((this.page - 1) * this.page_size, this.page_size * this.page)\r\n            }\r\n        }\r\n    },\r\n    created() {\r\n        let routerinfo = this.$route.query\r\n        if (routerinfo.title == '观看记录') {\r\n            this.movies = this.history\r\n            this.allmovies = this.history\r\n        }\r\n\r\n        this.handleCurrentChange(1)\r\n    }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\nbody {\r\n    background-color: #111319cc;\r\n}\r\n</style>\r\n"],"mappings":";AAmCA,SAASA,QAAO,QAAS,MAAK;AAC9B,SAASC,IAAG,QAAS,mBAAkB;AAEvC,eAAe;EACXC,IAAI,EAAE,SAAS;EACfC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,KAAK,EAAE,EAAE;MACTC,MAAM,EAAE,EAAE;MACVC,SAAS,EAAE,EAAE;MAAE;;MAEfC,WAAW,EAAE,CAAC;MAEdC,SAAS,EAAE,CAAC;MACZC,IAAI,EAAE;IACV;EACJ,CAAC;EACDC,QAAQ,EAAE;IACN,GAAGV,QAAQ,CAAC;MACRW,OAAO,EAAGC,KAAK,IAAKA,KAAK,CAACC,KAAK,CAACF;IACpC,CAAC;EACL,CAAC;EACDG,OAAO,EAAE;IACLC,eAAeA,CAACZ,IAAI,EAAE;MAClB,IAAI,CAACa,OAAO,CAACC,IAAI,CAAC;QAAEC,IAAI,EAAE,OAAO;QAAEC,KAAK,EAAE;UAAEC,EAAE,EAAEjB,IAAI,CAACiB,EAAE;UAAEC,IAAI,EAAE,IAAI,CAACC,MAAM,CAACH,KAAK,CAACE;QAAK;MAAE,CAAC,CAAC,CAACE,KAAK,CAAEC,KAAK,IAAKA,KAAK;IACrH,CAAC;IAEDC,gBAAgBA,CAACtB,IAAI,EAAE;MACnB,IAAI,CAACK,SAAQ,GAAIL,IAAG;MACpB,IAAI,CAACM,IAAG,GAAI;MACZ,IAAIiB,QAAO,GAAIC,IAAI,CAACC,IAAI,CAAC,IAAI,CAACtB,SAAS,CAACuB,MAAK,GAAI,IAAI,CAACrB,SAAS;MAC/D,IAAI,IAAI,CAACC,IAAG,GAAIiB,QAAO,GAAI,CAAC,EAAE;QAC1B,IAAI,CAACrB,MAAK,GAAI,IAAI,CAACC,SAAS,CAACwB,KAAK,CAAC,CAAC,IAAI,CAACrB,IAAG,GAAI,CAAC,IAAI,IAAI,CAACD,SAAS,EAAE,IAAI,CAACA,SAAQ,GAAI,IAAI,CAACC,IAAI;MACnG,OAAO;QACH;QACAsB,UAAU,CAAC,MAAM;UACb,IAAI,CAAC1B,MAAK,GAAI,IAAI,CAACC,SAAS,CAACwB,KAAK,CAAC,CAAC,IAAI,CAACrB,IAAG,GAAIiB,QAAQ,IAAI,IAAI,CAAClB,SAAS,EAAE,IAAI,CAACA,SAAQ,GAAI,IAAI,CAACC,IAAI;QAC1G,CAAC,EAAE,CAAC;MACR;IACJ,CAAC;IACDuB,mBAAmBA,CAAC7B,IAAI,EAAE;MACtB,IAAI,CAACM,IAAG,GAAIN,IAAG;MACf,IAAIuB,QAAO,GAAIC,IAAI,CAACC,IAAI,CAAC,IAAI,CAACtB,SAAS,CAACuB,MAAK,GAAI,IAAI,CAACrB,SAAS;MAC/D,IAAI,IAAI,CAACC,IAAG,GAAIiB,QAAO,IAAK,CAAC,EAAE;QAC3B,IAAI,CAACrB,MAAK,GAAI,IAAI,CAACC,SAAS,CAACwB,KAAK,CAAC,CAAC,IAAI,CAACrB,IAAG,GAAI,CAAC,IAAI,IAAI,CAACD,SAAS,EAAE,IAAI,CAACA,SAAQ,GAAI,IAAI,CAACC,IAAI;MACnG;IACJ;EACJ,CAAC;EACDwB,OAAOA,CAAA,EAAG;IACN,IAAIC,UAAS,GAAI,IAAI,CAACZ,MAAM,CAACH,KAAI;IACjC,IAAIe,UAAU,CAAC9B,KAAI,IAAK,MAAM,EAAE;MAC5B,IAAI,CAACC,MAAK,GAAI,IAAI,CAACM,OAAM;MACzB,IAAI,CAACL,SAAQ,GAAI,IAAI,CAACK,OAAM;IAChC;IAEA,IAAI,CAACqB,mBAAmB,CAAC,CAAC;EAC9B;AACJ","ignoreList":[]}]}